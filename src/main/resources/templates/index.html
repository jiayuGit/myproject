<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<!-- 最新版本的 Bootstrap 核心 CSS 文件 -->
<link rel="stylesheet" href="/static/css/bootstrap.min.css">
<!-- 可选的 Bootstrap 主题文件（一般不用引入） -->
<link rel="stylesheet" href="/static/css/bootstrap-theme.min.css">
<!--&lt;!&ndash; 最新的 Bootstrap 核心 JavaScript 文件 &ndash;&gt;-->
<!--<script src="/static/js/bootstrap.min.js"></script>-->
<script src="/static/js/util.js" type="text/javascript"></script>
<script src="/static/js/vue.js" type="text/javascript"></script>
<body>
<ul class="nav nav-pills nav-stacked">

</ul>
<!--<table id="example-1" class="table table-hover">-->
<!--<tr v-for="item in items" :key="item.message" class="list-group-item">-->
<!--<td width="50">{{ item.message }}</td>-->
<!--<td>{{ item.data }}</td>-->
<!--</tr>-->
<!--</table>-->

<div style="padding:20px;" id="app">
    <div class="panel panel-primary">
        <div class="panel-heading">
            <center><h2>用户管理</h2></center>
        </div>
        <table id="example-1" class="table table-bordered table-striped text-center">
            <thead>
            <tr>
                <th>
                    <center>序号</center>
                </th>
                <th>
                    <center>用户名</center>
                </th>
                <th>
                    <center>年龄</center>
                </th>
                <th>
                    <center>毕业学校</center>
                </th>
                <th>
                    <center>操作</center>
                </th>
            </tr>
            </thead>
            <tbody>
            <!--<tr v-for="(item,index) in items" :key="item.message">-->
            <tr v-for="(data,index) in pageDate.list">
                <td>{{index+1}}</td>
                <td>{{data.name}}</td>
                <td>{{data.age}}</td>
                <td>{{data.school}}</td>
                <td>
                    <button @click="remove(data)">remove</button>
                </td>
            </tr>
            </tbody>
        </table>
    </div>
</div>
</body>

<script type="text/javascript">
    var page = null;
    var pageDate = {
        page: page,
        list: [
            {'name': '李磊', 'age': '25', 'school': '洛阳理工'}
        ]
    };

    var example1 = new Vue({
            el: '#example-1',
            data: {
                // user: {'name': '', 'age': '', 'school': ''},
                pageDate: pageDate
                // [
                //     {'name': '李磊', 'age': '25', 'school': '洛阳理工'},
                //     {'name': '张成', 'age': '23', 'school': '桂林电子科技'},
                //     {'name': '炼心', 'age': '22', 'school': '江西电子科技'}
                // ]
            },
            methods: {
                remove(index) {
                    console.log('remove' + JSON.stringify(index));

                }

            }
        }
    );
    selectPage(1,10);
    function selectPage(page,size) {
        let xmlHttp = new XMLHttpRequest();
        xmlHttp.onreadystatechange=function (ev) {
            if(xmlHttp.readyState===4&&xmlHttp.status===200){
                console.log(xmlHttp.getResponseHeader('content-type'));
                if (xmlHttp.getResponseHeader(content_type)===applction_json){
                    let data = JSON.parse(xmlHttp.responseText);
                    if (data.code===0) {
                        nologin(data.message);
                        pageDate.list=data.data;
                        return;
                    }else {
                        nologin(data.message);
                    }


                }else {
                    console.log(xmlHttp.responseText);
                    nologin('服务器正在抢修中!!');
                }

            }
        }
        xmlHttp.open("POST",servicePate+'/role/userPage',true);
        xmlHttp.setRequestHeader('content-type','application/json');
        xmlHttp.setRequestHeader('access-token',getToken());
        xmlHttp.send(JSON.stringify({
            startPage:page!==null?page:1,
            pageSize:size!=null?size:10
        }));
    }


</script>
<script src="/static/js/index.js" type="text/javascript"></script>

</html>